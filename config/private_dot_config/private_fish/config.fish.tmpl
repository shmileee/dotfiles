{{ if (eq .chezmoi.os "darwin") }}
if command -v gsed > /dev/null
    alias sed 'gsed'
end

{{ else if (eq .chezmoi.os "linux" ) }}
# PATH

{{- if not (env "DOCKERIZED") }}
fish_add_path /home/linuxbrew/.linuxbrew/bin
{{- end }}

fish_add_path $HOME/.local/bin
{{ end }}

set -x EDITOR vim

# GPG
set -x GPG_TTY (tty)

# locale
# set -x LC_CTYPE en_US.UTF-8 -- issues with pyenv


# env vars
set -x XDG_CONFIG_HOME $HOME/.config
set -x XDG_CACHE_HOME $HOME/.cache


# direnv
if command -v direnv > /dev/null
    eval (direnv hook fish)
end


# anyenv
if test -d $HOME/.anyenv
    source (anyenv init - fish | psub)
end


# go
set -x GOPATH $HOME/go
fish_add_path $GOPATH/bin


# rust
fish_add_path $HOME/.cargo/bin


# kubernetes
set -x KUBE_EDITOR vim


# alias

## common
if command -v tree > /dev/null
  alias tree 'tree -a -I ".git|*.pyc|*pycache*"'
end

## exa
if command -v exa > /dev/null
    alias l="exa --icons"
    alias ls="exa --git --icons"
    alias la="exa --git -a --icons"
    alias ll="exa -lab --git --icons"
    alias tree="exa --tree --icons"
else
    alias l="ls"
    alias la="ls -a"
    alias ll="ls -al"
end

## bat
if command -v bat > /dev/null
    alias cat="bat --plain"
end

## git
alias g 'git'
alias ghb 'gh repo view -w'
alias gdc 'git diff --cached | vim -'
alias cdp 'cd (git rev-parse --show-toplevel)'

## rg
alias rg 'rg --hidden --follow --glob "!.git"'


# abbreviatios
abbr g git
abbr dps 'docker ps'
abbr dpa 'docker ps -a'
abbr dkd 'docker run -d -P'
abbr dex 'docker exec -i -t'
abbr dki 'docker run -i -t -P'
abbr dip 'docker inspect --format "{{ .NetworkSettings.IPAddress }}"'
abbr groot 'git rev-parse --show-toplevel'


# fzf
set -gx FZF_DEFAULT_COMMAND "rg --files --hidden --follow --glob '!.git'"
set -gx FZF_DEFAULT_OPTS "--color=dark"
set -gx FZF_CTRL_T_COMMAND "rg --files --hidden --follow --glob '!.git'"


# fish bobthefish-theme config
set -g theme_date_format "+20%y/%m/%d %H:%M"
set -g theme_display_k8s_context no
